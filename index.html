<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Â£≤‰∏äÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É†</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <header class="header">
            <div class="header-content">
                <h1>üí∞ Â£≤‰∏äÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É†</h1>
                <div class="header-controls">
                    <button id="themeToggle" class="theme-toggle">üåô „ÉÄ„Éº„ÇØ„É¢„Éº„Éâ</button>
                </div>
            </div>
        </header>

        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <main class="main-content">
            <!-- „Çø„Éñ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ -->
            <div class="tabs">
                <button class="tab-button active" data-tab="input">üìù ÂÖ•Âäõ</button>
                <button class="tab-button" data-tab="data">üìä „Éá„Éº„Çø‰∏ÄË¶ß</button>
                <button class="tab-button" data-tab="archive">üì¶ „Ç¢„Éº„Ç´„Ç§„Éñ</button>
                <button class="tab-button" data-tab="analytics">üìà ÂàÜÊûê</button>
            </div>

            <!-- „Çø„Éñ1: ÂÖ•Âäõ„Éï„Ç©„Éº„É† -->
            <section id="input-tab" class="tab-content active">
                <div class="form-section">
                    <h2>„Éá„Éº„ÇøÂÖ•Âäõ</h2>
                    <form id="dataForm" class="form-group">
                        <div class="form-row">
                            <div class="form-field">
                                <label for="date">Êó•‰ªò *</label>
                                <input type="date" id="date" required>
                            </div>
                            <div class="form-field">
                                <label for="sales">Â£≤‰∏ä *</label>
                                <input type="number" id="sales" min="0" step="0.01" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-field">
                                <label for="cost">„Ç≥„Çπ„Éà *</label>
                                <input type="number" id="cost" min="0" step="0.01" required>
                            </div>
                            <div class="form-field">
                                <label for="category">„Ç´„ÉÜ„Ç¥„É™„Éº</label>
                                <input type="text" id="category" placeholder="‰æãÔºöÂïÜÂìÅA">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-field full-width">
                                <label for="memo">„É°„É¢</label>
                                <textarea id="memo" rows="3" placeholder="ÂÇôËÄÉ„ÇíÂÖ•Âäõ"></textarea>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">‰øùÂ≠ò</button>
                            <button type="reset" class="btn btn-secondary">„É™„Çª„ÉÉ„Éà</button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- „Çø„Éñ2: „Éá„Éº„Çø‰∏ÄË¶ß -->
            <section id="data-tab" class="tab-content">
                <div class="data-section">
                    <h2>„Éá„Éº„Çø‰∏ÄË¶ß</h2>
                    
                    <!-- „Éï„Ç£„É´„Çø„Éº -->
                    <div class="filter-section">
                        <div class="filter-row">
                            <div class="filter-field">
                                <label for="filterStartDate">ÈñãÂßãÊó•‰ªò</label>
                                <input type="date" id="filterStartDate">
                            </div>
                            <div class="filter-field">
                                <label for="filterEndDate">ÁµÇ‰∫ÜÊó•‰ªò</label>
                                <input type="date" id="filterEndDate">
                            </div>
                            <div class="filter-field">
                                <label for="filterCategory">„Ç´„ÉÜ„Ç¥„É™„Éº</label>
                                <input type="text" id="filterCategory" placeholder="„Ç´„ÉÜ„Ç¥„É™„Éº„ÅßÊ§úÁ¥¢">
                            </div>
                            <div class="filter-actions">
                                <button id="filterBtn" class="btn btn-primary">Ê§úÁ¥¢</button>
                                <button id="resetFilterBtn" class="btn btn-secondary">„É™„Çª„ÉÉ„Éà</button>
                            </div>
                        </div>
                    </div>

                    <!-- ‰∏ÄÊã¨Êìç‰Ωú -->
                    <div class="bulk-actions">
                        <label>
                            <input type="checkbox" id="selectAllCheckbox">
                            „Åô„Åπ„Å¶ÈÅ∏Êäû
                        </label>
                        <button id="deleteSelectedBtn" class="btn btn-danger" disabled>ÈÅ∏ÊäûÈ†ÖÁõÆ„ÇíÂâäÈô§</button>
                        <button id="archiveSelectedBtn" class="btn btn-warning" disabled>ÈÅ∏ÊäûÈ†ÖÁõÆ„Çí„Ç¢„Éº„Ç´„Ç§„Éñ</button>
                    </div>

                    <!-- „Éá„Éº„Çø„ÉÜ„Éº„Éñ„É´ -->
                    <div class="table-wrapper">
                        <table id="dataTable" class="data-table">
                            <thead>
                                <tr>
                                    <th><input type="checkbox" class="select-row-checkbox"></th>
                                    <th>Êó•‰ªò</th>
                                    <th>Â£≤‰∏ä</th>
                                    <th>„Ç≥„Çπ„Éà</th>
                                    <th>Âà©Áõä</th>
                                    <th>Âà©ÁõäÁéá</th>
                                    <th>„Ç´„ÉÜ„Ç¥„É™„Éº</th>
                                    <th>„É°„É¢</th>
                                    <th>Êìç‰Ωú</th>
                                </tr>
                            </thead>
                            <tbody id="dataTableBody">
                            </tbody>
                        </table>
                    </div>

                    <div id="noDataMessage" class="no-data">„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</div>
                </div>
            </section>

            <!-- „Çø„Éñ3: „Ç¢„Éº„Ç´„Ç§„Éñ -->
            <section id="archive-tab" class="tab-content">
                <div class="archive-section">
                    <h2>„Ç¢„Éº„Ç´„Ç§„ÉñÁÆ°ÁêÜ</h2>

                    <!-- „Ç¢„Éº„Ç´„Ç§„Éñ„Éï„Ç£„É´„Çø„Éº -->
                    <div class="filter-section">
                        <div class="filter-row">
                            <div class="filter-field">
                                <label for="archiveFilterStartDate">ÈñãÂßãÊó•‰ªò</label>
                                <input type="date" id="archiveFilterStartDate">
                            </div>
                            <div class="filter-field">
                                <label for="archiveFilterEndDate">ÁµÇ‰∫ÜÊó•‰ªò</label>
                                <input type="date" id="archiveFilterEndDate">
                            </div>
                            <div class="filter-actions">
                                <button id="archiveFilterBtn" class="btn btn-primary">Ê§úÁ¥¢</button>
                                <button id="resetArchiveFilterBtn" class="btn btn-secondary">„É™„Çª„ÉÉ„Éà</button>
                            </div>
                        </div>
                    </div>

                    <!-- ‰∏ÄÊã¨Êìç‰Ωú -->
                    <div class="bulk-actions">
                        <label>
                            <input type="checkbox" id="selectAllArchiveCheckbox">
                            „Åô„Åπ„Å¶ÈÅ∏Êäû
                        </label>
                        <button id="restoreSelectedBtn" class="btn btn-info" disabled>ÈÅ∏ÊäûÈ†ÖÁõÆ„ÇíÂæ©ÂÖÉ</button>
                        <button id="deleteArchiveSelectedBtn" class="btn btn-danger" disabled>ÈÅ∏ÊäûÈ†ÖÁõÆ„ÇíÂâäÈô§</button>
                    </div>

                    <!-- „Ç¢„Éº„Ç´„Ç§„Éñ„ÉÜ„Éº„Éñ„É´ -->
                    <div class="table-wrapper">
                        <table id="archiveTable" class="data-table">
                            <thead>
                                <tr>
                                    <th><input type="checkbox" class="select-archive-row-checkbox"></th>
                                    <th>Êó•‰ªò</th>
                                    <th>Â£≤‰∏ä</th>
                                    <th>„Ç≥„Çπ„Éà</th>
                                    <th>Âà©Áõä</th>
                                    <th>Âà©ÁõäÁéá</th>
                                    <th>„Ç´„ÉÜ„Ç¥„É™„Éº</th>
                                    <th>„É°„É¢</th>
                                    <th>Êìç‰Ωú</th>
                                </tr>
                            </thead>
                            <tbody id="archiveTableBody">
                            </tbody>
                        </table>
                    </div>

                    <div id="noArchiveDataMessage" class="no-data">„Ç¢„Éº„Ç´„Ç§„Éñ„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</div>
                </div>
            </section>

            <!-- „Çø„Éñ4: ÂàÜÊûê -->
            <section id="analytics-tab" class="tab-content">
                <div class="analytics-section">
                    <h2>ÂàÜÊûê„Éª„É¨„Éù„Éº„Éà</h2>

                    <!-- „Çµ„Éû„É™„Éº„Ç´„Éº„Éâ -->
                    <div class="summary-cards">
                        <div class="card">
                            <h3>Á∑èÂ£≤‰∏ä</h3>
                            <p id="totalSales" class="value">¬•0</p>
                        </div>
                        <div class="card">
                            <h3>Á∑è„Ç≥„Çπ„Éà</h3>
                            <p id="totalCost" class="value">¬•0</p>
                        </div>
                        <div class="card">
                            <h3>Á∑èÂà©Áõä</h3>
                            <p id="totalProfit" class="value">¬•0</p>
                        </div>
                        <div class="card">
                            <h3>Âπ≥ÂùáÂà©ÁõäÁéá</h3>
                            <p id="avgProfitMargin" class="value">0%</p>
                        </div>
                    </div>

                    <!-- „Ç∞„É©„Éï -->
                    <div class="chart-container">
                        <div class="chart">
                            <h3>ÊúàÂà•Â£≤‰∏ä„Éª„Ç≥„Çπ„Éà</h3>
                            <canvas id="monthlyChart"></canvas>
                        </div>
                        <div class="chart">
                            <h3>„Ç´„ÉÜ„Ç¥„É™„ÉºÂà•Â£≤‰∏ä</h3>
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>

                    <!-- Ë©≥Á¥∞Áµ±Ë®à -->
                    <div class="statistics">
                        <h3>Ë©≥Á¥∞Áµ±Ë®à</h3>
                        <table id="statisticsTable" class="stats-table">
                            <thead>
                                <tr>
                                    <th>È†ÖÁõÆ</th>
                                    <th>ÂÄ§</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>„Éá„Éº„Çø‰ª∂Êï∞</td>
                                    <td id="dataCount">0</td>
                                </tr>
                                <tr>
                                    <td>Âπ≥ÂùáÂ£≤‰∏ä/Êó•</td>
                                    <td id="avgSalesPerDay">¬•0</td>
                                </tr>
                                <tr>
                                    <td>ÊúÄÂ§ßÂ£≤‰∏ä</td>
                                    <td id="maxSales">¬•0</td>
                                </tr>
                                <tr>
                                    <td>ÊúÄÂ∞èÂ£≤‰∏ä</td>
                                    <td id="minSales">¬•0</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- „É¢„Éº„ÉÄ„É´ÔºàÁ∑®ÈõÜÁî®Ôºâ -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>„Éá„Éº„ÇøÁ∑®ÈõÜ</h2>
            <form id="editForm" class="form-group">
                <input type="hidden" id="editId">
                
                <div class="form-row">
                    <div class="form-field">
                        <label for="editDate">Êó•‰ªò *</label>
                        <input type="date" id="editDate" required>
                    </div>
                    <div class="form-field">
                        <label for="editSales">Â£≤‰∏ä *</label>
                        <input type="number" id="editSales" min="0" step="0.01" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-field">
                        <label for="editCost">„Ç≥„Çπ„Éà *</label>
                        <input type="number" id="editCost" min="0" step="0.01" required>
                    </div>
                    <div class="form-field">
                        <label for="editCategory">„Ç´„ÉÜ„Ç¥„É™„Éº</label>
                        <input type="text" id="editCategory">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-field full-width">
                        <label for="editMemo">„É°„É¢</label>
                        <textarea id="editMemo" rows="3"></textarea>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Êõ¥Êñ∞</button>
                    <button type="button" class="btn btn-secondary" id="cancelEditBtn">„Ç≠„É£„É≥„Çª„É´</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ÂâäÈô§Á¢∫Ë™ç„É¢„Éº„ÉÄ„É´ -->
    <div id="deleteModal" class="modal">
        <div class="modal-content modal-small">
            <h2>ÂâäÈô§Á¢∫Ë™ç</h2>
            <p id="deleteMessage"></p>
            <div class="form-actions">
                <button id="confirmDeleteBtn" class="btn btn-danger">ÂâäÈô§</button>
                <button id="cancelDeleteBtn" class="btn btn-secondary">„Ç≠„É£„É≥„Çª„É´</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="db.js"></script>
    <script src="script.js"></script>
</body>
</html>